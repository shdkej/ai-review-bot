# Repository Guidelines

## 프로젝트 구조 및 모듈 구성
이 저장소는 `TECH_SPEC.md`에 정의된 클린 아키텍처를 따르는 코드 리뷰 봇을 다룹니다. `main.py`는 오케스트레이션만 담당하고 비즈니스 규칙은 `src/` 하위 계층으로 위임하세요. 권장 레이아웃은 `src/controller/`에 Lambda 스타일 핸들러, `src/service/`에 워크플로 단계, `src/domain/`에 순수 비즈니스 로직, `src/entity/`에 데이터 래퍼를 두는 방식입니다. 프롬프트나 파싱 헬퍼는 `src/support/`에 모읍니다. 단위 테스트는 동일한 트리를 `tests/` 아래에서 미러링하고, `Dockerfile`, `pyproject.toml`, CI 스크립트 등 빌드 자산은 루트에 둡니다.

## 빌드·테스트·개발 커맨드
재현 가능한 실행 환경을 위해 Docker를 기본 경로로 사용합니다. `docker build -t ai-review-bot .`은 `PLAN.md`에 명시된 리뷰용 이미지를 만들고 `docker run --rm -it ai-review-bot`이 에이전트를 실행합니다. 로컬 개발 시에는 `pip install -e .[dev]`로 의존성을 설치하고 `python main.py --help`로 CLI 인자를 빠르게 확인하세요. 전체 테스트는 `pytest`, 특정 그룹만 실행할 때는 `pytest -k <패턴>`을 활용합니다. `ruff format src tests`와 `ruff check src tests`를 PR 전에 반드시 돌려 포맷과 린트를 통과시킵니다.

## 코딩 스타일 및 네이밍 규약
기본 파이썬 버전은 3.11이며 Ruff 기본 프로필을 강제합니다. Ruff가 보고하는 모든 경고를 차단 조건으로 간주하세요. `from src.domain.user import build_review`처럼 명시적 임포트를 선호하고, 함수는 스네이크 케이스, 클래스는 파스칼 케이스, 상수는 전부 대문자로 작성합니다. 컨트롤러 계층은 단일 플로우와 1단계 조건문만 허용하며, 서비스 계층이 도메인 함수를 조합합니다. 도메인 모듈에는 순수 함수만 유지하고 숨겨진 상태나 암묵적 전역 사용을 금지합니다.

## 테스트 가이드라인
`tests/` 디렉터리 아래에 `test_<module>.py` 형식으로 `pytest` 스위트를 작성합니다. 각 레이어를 독립적으로 검증하세요: 컨트롤러 테스트는 서비스를 모킹하고, 서비스 테스트는 단계 순서를 확인하며, 도메인 테스트는 경계값과 예외를 집중적으로 다룹니다. 재사용 데이터는 `tests/fixtures/`에 두고, 가정 사항은 테스트 내 주석으로 명시하세요. 라인 커버리지는 최소 85%를 목표로 하며 `pytest --cov=src --cov-report=term-missing` 결과를 로컬에서 확인합니다. GitLab 콜백 등 수동 검증이 필요한 흐름은 PR 설명에 단계별로 기록합니다.

## 커밋 및 PR 가이드라인
커밋 메시지는 Conventional Commit 접두사(`feat:`, `fix:`, `chore:`, `docs:`, `test:`)를 사용하고 제목은 72자 이내로 유지하세요. PR에는 관련 이슈나 티켓을 링크하고 리뷰어가 확인해야 할 포인트를 요약합니다. `pytest`, `ruff`, Docker 빌드를 수행했다면 로그나 결과를 본문에 붙여 주세요. 콘솔 UX가 변할 경우 스크린샷 또는 CLI 캡처를 첨부합니다. 아키텍처 가이드와 다른 의도적 예외가 있다면 PR에서 분명히 표기해 리뷰어가 `TECH_SPEC.md`와 비교할 수 있도록 합니다.
## 기본 룰
- 한글로 대답합니다.


## 환경 설정
- 프로젝트별로 환경을 세팅합니다
  - python .venv 를 활성화합니다
  - nodejs asdf로 버전을 확인합니다
  - java asdf


## 진행 방식
1. PLAN.md 에서 요구사항을 확인합니다
2. 간단한 테스트를 생성합니다
3. 구현합니다
4. 구현 결과를 PLAN.md에 업데이트 합니다
5. 다음 작업을 기다립니다

## 간편한 설정
- 'go' 를 입력받으면 PLAN.md에서 요구사항을 확인하고 진행합니다.

## 설계 가이드
1. 요청 분석
2. 사고 구조화
3. 문서 작성
4. 실행 단위화
5. 검증과 피드백
6. 산출물 업데이트

## 구현 가이드
1. 요청 해석
2. 단계적 사고
3. 코드 작성
4. 지식 연결
5. 피드백 루프
6. 결과 보고
